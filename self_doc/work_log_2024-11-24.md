# 工作日志（2024-11-24）

## 项目：Anime Weapons 官网

### 主要改动
- SEO：为首页和 Codes 页新增独立 meta title/description；在全局 layout 增加 canonical、OG/Twitter 元信息、站点级 WebSite JSON-LD 结构化数据；添加 `.vercelignore` 以排除 self_doc；新增 `vercel.json` 强制 Vercel 识别 Next.js 并使用 `npm run build` / `.next`。
- 导航与布局：Homepage hero 右侧嵌入发布视频；调整 hero 排版、移除统计卡片；修复导航锚点（Wiki/Tier List/Games）并提供隐藏锚点保证跳转；保持 Active Codes 位于 Hero 之后；移除主页 Wiki/Tier List/Related Games 模块。
- 文案与关键词：提高 “Anime Weapons”/“anime weapons codes” 在首页文案的出现频率（控制在合理密度），Active Codes 标题描述同步更新。
- Codes 数据：新增 `data/codes.ts` 作为单一数据源；主页 Active Codes 与 /codes 页面同步；配置动态 “Last Updated” 日期；空 expired 时隐藏切换。
- 图标与 UI：全站替换 emoji 为统一 SVG 图标组件；CTA、标题等使用新图标；修复 hero 标题行距避免字形裁剪。
- 资源与验证：更新 favicon 引用；新增 `robots.txt`、`sitemap.xml`；添加 Google Analytics (G-65KM1T79ZB)；添加 Google 站点验证文件 `public/googlede440813da04503a.html`。

### 部署相关
- Vercel 404 原因：未检测到框架。通过新增 `vercel.json`（framework=nextjs, buildCommand=npm run build, outputDirectory=.next）解决。
- 生产域名自定义 SSL 正在申请中，建议重新部署后再验证。

### 未解决/待注意
- 本地 `.git` 权限多次阻塞 `git add`/push；需在本机修复 `.git` 权限后再提交推送（当前改动未入库：导航锚点调整、文案调整、vercel.json、GA 脚本等）。

### 检查与构建
- `npm run lint`：通过（多次运行均 OK）。
- `npm run build`：通过（Next.js 14.2.18 静态预渲染）。

### 文件要点
- `app/layout.tsx`: 站点元信息、OG/Twitter、JSON-LD、GA 脚本、favicon/manifest。
- `app/page.tsx`: Home 布局（Hero + Active Codes + Features + Footer），隐藏锚点。
- `components/*`: Header/Footer 导航锚点修复；Hero 文案与视频；CodesSection/Features 文案与图标更新。
- `data/codes.ts`: 统一代码数据源。
- `public/robots.txt`, `public/sitemap.xml`, `public/googlede440813da04503a.html`.
- `vercel.json`: 指定 Next.js 框架与构建输出。
- `.vercelignore`: 排除 self_doc。
