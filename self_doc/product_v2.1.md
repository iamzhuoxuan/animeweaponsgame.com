æˆ‘å·²ç»æ ¹æ®æ‚¨çš„æ‰€æœ‰å»ºè®®ï¼Œå°†åŸå§‹ PRD è¿›è¡Œäº†ä¼˜åŒ–å’Œç»“æ„è°ƒæ•´ï¼Œæ˜ç¡®åŒºåˆ†äº† **MVP (æœ€å°å¯è¡Œäº§å“)**ã€**ä¸€æœŸè§„åˆ’** å’Œ **äºŒæœŸè§„åˆ’** çš„åŠŸèƒ½èŒƒå›´ã€‚

è¿™ä»½æœ€ç»ˆç‰ˆ PRD åŒ…å«äº†è¯¦ç»†çš„æ•°æ®é¢—ç²’åº¦ã€UI çŠ¶æ€è§„èŒƒå’ŒæŠ€æœ¯å®ç°è¦ç‚¹ï¼Œå¯ä»¥ç›´æ¥äº¤ä»˜ç»™å·¥ç¨‹å›¢é˜Ÿã€‚

------



# ğŸ† Anime Weapons æ”»ç•¥ç«™ - æœ€ç»ˆäº§å“éœ€æ±‚æ–‡æ¡£ (PRD V2.1)



| **å±æ€§**       | **å€¼**                                           |
| -------------- | ------------------------------------------------ |
| **ç‰ˆæœ¬å·**     | **V2.1 (åˆ†é˜¶æ®µäº¤ä»˜)**                            |
| **ç›®æ ‡å—ä¼—**   | Roblox ç©å®¶ï¼ŒAnime Weapons è¿›é˜¶ç©å®¶/æ•°æ®çˆ±å¥½è€… |
| **æ ¸å¿ƒæŠ€æœ¯æ ˆ** | Next.js 14 (App Router) + Sanity CMS + Vercel    |

------



## 1. ç›®æ ‡ä¸æ„¿æ™¯ (Goals & Vision)





### 1.1 äº§å“æ„¿æ™¯



æˆä¸º Roblox æ¸¸æˆ **Anime Weapons** ç¤¾åŒºä¸­ï¼Œ**æ›´æ–°æœ€å¿«ã€æ•°æ®æœ€å‡†ç¡®ã€ä¸”å…·å¤‡é«˜æ•ˆåŒå‘å…³è”èƒ½åŠ›**çš„æƒå¨æ”»ç•¥ä¸æ•°æ®æŸ¥è¯¢å¹³å°ã€‚



### 1.2 æ ¸å¿ƒç›®æ ‡



1. **MVP æµé‡é©±åŠ¨ï¼š** é€šè¿‡ "å…‘æ¢ç " å’Œ "å¼ºåº¦æ¦œ" å…³é”®è¯ï¼Œå®ç°ç½‘ç«™ SEO é¢†å…ˆã€‚
2. **ä¸€æœŸæƒå¨æ€§ï¼š** æä¾›å‡†ç¡®çš„è§’è‰²æ•°å€¼ï¼ˆåŒ…å«ç‰¹æ€§ Traitï¼‰å’Œå¤æ‚çš„è¿›åŒ–é…æ–¹ï¼Œæˆä¸ºç¤¾åŒºé¦–é€‰æ•°æ®æºã€‚
3. **å…¨æœŸç²˜æ€§ï¼š** é€šè¿‡æ–‡ç« ä¸è§’è‰²æ•°æ®åº“çš„**åŒå‘å…³è”**ç³»ç»Ÿï¼Œæœ€å¤§åŒ–ç”¨æˆ·ç«™å†…åœç•™æ—¶é—´ã€‚

------



## 2. ç½‘ç«™æ¶æ„ä¸åœ°å›¾ (Architecture & Sitemap)



| **è·¯ç”± (Path)** | **é¡µé¢åç§°**    | **MVP/Phase** | **é¡µé¢åŠŸèƒ½æ¦‚è¦**                                      |
| --------------- | --------------- | ------------- | ----------------------------------------------------- |
| `/`             | é¦–é¡µ            | MVP           | Dashboardï¼šæœ€æ–°å…‘æ¢ç æ‘˜è¦ã€Tier List ç®€æŠ¥ã€æœ€æ–°æ–‡ç« ã€‚ |
| `/codes`        | å…‘æ¢ç å¤§å…¨      | MVP           | å®Œæ•´çš„æœ‰æ•ˆ/è¿‡æœŸä»£ç åˆ—è¡¨ã€‚æ”¯æŒä¸€é”®å¤åˆ¶ã€‚               |
| `/tierlist`     | å¼ºåº¦æ’è¡Œæ¦œ      | MVP           | æ ¸å¿ƒï¼šæŒ‰æ¨¡å¼ç­›é€‰çš„ SSS/SS/S/A è§’è‰²åˆ—è¡¨ã€‚              |
| `/units`        | è§’è‰²å›¾é‰´åˆ—è¡¨    | MVP           | æ‰€æœ‰è§’è‰²çš„å¡ç‰‡å¼åˆ—è¡¨ã€‚å¯æŒ‰ç¨€æœ‰åº¦ã€å±æ€§ç­›é€‰ã€‚          |
| `/units/[slug]` | è§’è‰²è¯¦æƒ…é¡µ      | MVP           | **å®Œæ•´**å±æ€§ã€è¿›åŒ–é…æ–¹ã€**åå‘å…³è”**æ”»ç•¥æ–‡ç« åˆ—è¡¨ã€‚    |
| `/blog`         | æ”»ç•¥æ–‡ç« åˆ—è¡¨    | MVP           | æ‰€æœ‰æ–‡ç« æ ‡é¢˜ã€æ‘˜è¦ã€å‘å¸ƒæ—¥æœŸã€‚                        |
| `/blog/[slug]`  | æ”»ç•¥æ–‡ç« è¯¦æƒ…    | MVP           | æ–‡ç« æ­£æ–‡ã€‚ä¾§è¾¹æ å¿…é¡»å±•ç¤º**æ­£å‘å…³è”**è§’è‰²å¡ç‰‡ã€‚        |
| `/traits`       | è¯æ¡/ç‰¹æ€§æ•°æ®åº“ | Phase 2       | è¯¦ç»†è§£é‡Šæ‰€æœ‰è¯æ¡æœºåˆ¶ã€‚                                |
| `/studio`       | Sanity Studio   | MVP           | ç®¡ç†åå°ï¼šå†…å®¹ç¼–è¾‘ä¸æ•°æ®ç»´æŠ¤å…¥å£ã€‚                    |

------



## 3. æ•°æ®å»ºæ¨¡ä¸ CMS æ¶æ„ (Sanity Schemas)



æ‰€æœ‰æ ¸å¿ƒå†…å®¹å‡ç”± Sanity CMS ç®¡ç†ã€‚

| **ID**  | **Schema åç§°** | **å¯¹åº”æ–‡æ¡£ç±»å‹** | **å…³é”®å­—æ®µ (Fields)**                                        | **é˜¶æ®µ** |
| ------- | --------------- | ---------------- | ------------------------------------------------------------ | -------- |
| **S-1** | `item`          | ææ–™/ç‰©å“        | `name`, `slug`, `image`                                      | MVP      |
| **S-6** | `trait`         | ç‰¹æ€§/è¯æ¡        | `name`, `rarity`, `effect_description`                       | Phase 1  |
| **S-2** | `unit`          | è§’è‰²/å•ä½        | `name`, `rarity`, **`stats` (Detailed Object)**, `evolution_recipe` (ref to S-1), **`best_traits` (ref to S-6)** | MVP/P1   |
| **S-3** | `tierList`      | å¼ºåº¦æ¦œ           | `version`, **`modes` (Object Array: PvE/Infinite)**          | MVP/P1   |
| **S-4** | `redeemCode`    | å…‘æ¢ç            | `code_string`, `reward`, `status` (Active/Expired)           | MVP      |
| **S-5** | `article`       | æ”»ç•¥æ–‡ç«          | `title`, `body` (Portable Text), **`related_units` (ref to S-2)** | MVP      |



### S-2 `unit` Schema è¯¦ç»†é¢—ç²’åº¦ (MVP/Phase 1)



ä¸ºé¿å…å·¥ç¨‹æ­§ä¹‰ï¼Œ`stats` å¯¹è±¡ç»“æ„å¿…é¡»åŒ…å«ï¼š

| **å­—æ®µåç§°**            | **ç±»å‹**           | **æè¿°**                                   | **é˜¶æ®µ** |
| ----------------------- | ------------------ | ------------------------------------------ | -------- |
| `deployment_cost`       | Number             | åˆå§‹æ”¾ç½®è´¹ç”¨ (V0 å…³é”®)                     | MVP      |
| `max_level_stats`       | Object             | åŒ…å« `damage`, `spa`, `range` çš„æ»¡çº§æ•°å€¼ã€‚ | MVP      |
| `upgrade_costs_details` | Array              | è®°å½•æ¯ä¸€çº§å‡çº§æ‰€éœ€çš„èµ„æºå’Œæ•°å€¼å˜åŒ–ã€‚       | Phase 1  |
| `placement_type`        | String             | Ground / Hill (V0 å…³é”®)                    | MVP      |
| `attack_type`           | String             | AoE / Single / Line / Cone                 | Phase 1  |
| `best_traits`           | Array (Ref to S-6) | æ¨èè¯æ¡å¼•ç”¨ã€‚                             | Phase 1  |

------



## 4. é¡¹ç›®é˜¶æ®µåˆ’åˆ† (Phased Delivery)





### 4.1. MVP (æœ€å°å¯è¡Œäº§å“) - æµé‡ä¸åŸºç¡€æ•°æ®åº“



**ç›®æ ‡ï¼š** å»ºç«‹æ ¸å¿ƒæ•°æ®æºï¼ŒéªŒè¯åŒå‘å…³è”å¯è¡Œæ€§ï¼Œå¹¶è·å–åˆå§‹æµé‡ã€‚

| **æ¨¡å—**     | **åŠŸèƒ½è¦æ±‚ (FR-ID)**                                | **æŠ€æœ¯è¦æ±‚**                           |
| ------------ | --------------------------------------------------- | -------------------------------------- |
| **æµé‡é©±åŠ¨** | FR404: å…‘æ¢ç ä¸€é”®å¤åˆ¶ + Active/Expired åˆ†ç»„ã€‚       | **å¿…é¡»åœ¨ `/codes` é¡µé¢å®ç°ã€‚**         |
| **æ ¸å¿ƒå…³è”** | FR402: æ–‡ç« é¡µ -> å…³è”è§’è‰²å¡ç‰‡ (æ­£å‘å…³è”)ã€‚          | GROQ `->` è§£å¼•ç”¨ã€‚                     |
| **æ ¸å¿ƒå…³è”** | FR403: è§’è‰²é¡µ -> ç›¸å…³æ”»ç•¥æ–‡ç« åˆ—è¡¨ (åå‘å…³è”)ã€‚      | GROQ `references($unitId)` æŸ¥è¯¢ã€‚      |
| **æ•°æ®å±•ç¤º** | FR405: è§’è‰²è¯¦æƒ…é¡µå¿…é¡»å±•ç¤ºè¿›åŒ–é…æ–¹ï¼ˆå›¾æ ‡+æ•°é‡ï¼‰ã€‚    | S-2 å¼•ç”¨ S-1ï¼Œå‰ç«¯ä½¿ç”¨ `urlFor`ã€‚      |
| **æ¶æ„**     | FR501: Next.js 14 + Sanity å®ç°æ‰€æœ‰é¡µé¢çš„æ•°æ®è·å–ã€‚ | **Server Components** ä¸­å®Œæˆæ•°æ®è·å–ã€‚ |
| **UX åŸºç¡€**  | å¿…é¡»å®ç° MVP é¡µé¢çš„ **Loading State (éª¨æ¶å±)**ã€‚    | è§é™„å½• A.1ã€‚                           |



### 4.2. ä¸€æœŸè§„åˆ’ (Phase 1) - æƒå¨æ€§ä¸ç”¨æˆ·ç•™å­˜



**ç›®æ ‡ï¼š** æé«˜æ•°æ®çš„æƒå¨æ€§ã€ä¸“ä¸šåº¦ï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œæå‡ç•™å­˜ç‡ã€‚

| **æ¨¡å—**           | **åŠŸèƒ½è¦æ±‚**                                                 | **æŠ€æœ¯è¦æ±‚**                                          |
| ------------------ | ------------------------------------------------------------ | ----------------------------------------------------- |
| **ä¸“ä¸šæ•°æ®**       | å¯¼å…¥ **S-6 `trait`** Schemaï¼Œå¹¶åœ¨ `unit` Schema ä¸­å½•å…¥å¹¶å±•ç¤º **æ¨èè¯æ¡**ã€‚ | éœ€ä¿®æ”¹ CMS ç»“æ„ï¼Œå¹¶æ›´æ–° Unit è¯¦æƒ…é¡µ UIã€‚              |
| **Tier List è¿›é˜¶** | å®ç° Tier List **å¤šæ¨¡å¼åˆ‡æ¢** (PvE / Infinite)ã€‚             | S-3 Schema å¿…é¡»æ”¯æŒ `modes` å¯¹è±¡ç»“æ„ã€‚                |
| **æ€§èƒ½ä¼˜åŒ–**       | é…ç½® **Sanity Webhooks**ï¼Œå®ç° Next.js çš„ **On-Demand ISR**ã€‚ | æ›¿æ¢ `revalidate: 60` ä¸º Hook è°ƒç”¨ `revalidatePath`ã€‚ |
| **UX ä¼˜åŒ–**        | å®ç° **æš—é»‘æ¨¡å¼ (Dark Mode)** åˆ‡æ¢åŠŸèƒ½ï¼Œå¹¶é»˜è®¤ä¸ºæš—è‰²ä¸»é¢˜ã€‚   | ä½¿ç”¨ Tailwind CSS å®ç°ä¸»é¢˜åˆ‡æ¢ã€‚                      |
| **æ•°æ®çº é”™**       | å®Œå–„ `/units` åˆ—è¡¨çš„ **æŒ‰å±æ€§/å®šä½é«˜çº§ç­›é€‰**ã€‚               |                                                       |



### 4.3. äºŒæœŸè§„åˆ’ (Phase 2) - é«˜çº§å·¥å…·ä¸äº’åŠ¨



**ç›®æ ‡ï¼š** å¼•å…¥ç¤¾åŒºäº’åŠ¨å’Œå¤æ‚å·¥å…·ï¼Œå·©å›ºå¸‚åœºåœ°ä½ã€‚

| **æ¨¡å—**             | **åŠŸèƒ½è¦æ±‚**                                          | **æŠ€æœ¯è¦æ±‚**                                   |
| -------------------- | ----------------------------------------------------- | ---------------------------------------------- |
| **DPS/Build è®¡ç®—å™¨** | å…è®¸ç”¨æˆ·è¾“å…¥è¯æ¡ã€ç­‰çº§ï¼Œè®¡ç®—ç†è®ºæœ€é«˜ä¼¤å®³ã€‚            | å‰ç«¯è®¡ç®—é€»è¾‘å¤æ‚ï¼Œéœ€ç‹¬ç«‹æ¨¡å—å¼€å‘ã€‚             |
| **äº’åŠ¨æ¨¡å—**         | å¼•å…¥ Disqus æˆ– Giscusï¼Œå…è®¸ç”¨æˆ·åœ¨è§’è‰²é¡µä¸‹è¯„è®ºå’Œç•™è¨€ã€‚ | éœ€å¤„ç†ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆå’Œå†…å®¹å®‰å…¨ã€‚               |
| **æ•°æ®å®Œæ•´æ€§**       | å®Œå–„ **S-6 è¯æ¡æ•°æ®åº“** (`/traits`) è¯¦æƒ…é¡µå’Œåˆ—è¡¨é¡µã€‚  |                                                |
| **å•†ä¸šåŒ–**           | é¢„ç•™å¹¶æ¥å…¥ AdSense æˆ–å…¶ä»–å¹¿å‘Šå¹³å°çš„ **å¹¿å‘Šä½**ã€‚      | éœ€ç¬¦åˆ Vercel Serverless Function çš„èµ„æºé™åˆ¶ã€‚ |

------



## 5. æŠ€æœ¯ä¸éåŠŸèƒ½è¦æ±‚ (Technical & Non-Functional)



1. **æ€§èƒ½ï¼š** MVP é˜¶æ®µæ‰€æœ‰é¡µé¢çš„ **LCP (Largest Contentful Paint)** ç›®æ ‡å¿…é¡»ä½äº 2.5sã€‚
2. **SEOï¼š** æ‰€æœ‰ `/units/[slug]` é¡µé¢å¿…é¡»ä½¿ç”¨åŠ¨æ€çš„ã€åŒ…å«è§’è‰²åç§°çš„å…ƒæ ‡ç­¾ï¼Œå¹¶åµŒå…¥ **Schema.org JSON-LD (GameCharacter)** ç»“æ„åŒ–æ•°æ®ã€‚
3. **TS ç±»å‹å®‰å…¨ï¼š** å¿…é¡»ä½¿ç”¨å·¥å…·ä» Sanity Schemas ä¸­ç”Ÿæˆ TypeScript æ¥å£ï¼Œä¿è¯ç±»å‹å®‰å…¨ã€‚

------



## é™„å½• Aï¼šUI äº¤äº’çŠ¶æ€è§„èŒƒ (UX/UI)





### A.1. åŠ è½½çŠ¶æ€ (Loading State)



æ‰€æœ‰æ•°æ®å¯†é›†å‹é¡µé¢å¿…é¡»ä½¿ç”¨ **éª¨æ¶å± (Skeleton)** å ä½ç¬¦ï¼Œè€Œä¸æ˜¯ Loading Spinnerï¼Œä»¥æå‡æ„ŸçŸ¥æ€§èƒ½ã€‚

- **è§’è‰²åˆ—è¡¨ (/units):** æ˜¾ç¤º 12 ä¸ªç­‰å®½çš„**è§’è‰²å¡ç‰‡éª¨æ¶å±**ã€‚
- **è§’è‰²è¯¦æƒ…é¡µ:** ä¸»ç«‹ç»˜ä½ç½®æ˜¾ç¤ºç°è‰²å ä½ç¬¦ï¼Œæ•°å€¼é¢æ¿æ˜¾ç¤ºè¡ŒçŠ¶éª¨æ¶æ–‡æœ¬ã€‚



### A.2. ç©ºçŠ¶æ€ (Empty State)



æŸ¥è¯¢ç»“æœä¸ºç©ºæ—¶ï¼Œéœ€å‹å¥½æç¤ºç”¨æˆ·ï¼š

- **è§’è‰²åˆ—è¡¨ (ç­›é€‰/æœç´¢å):** å±…ä¸­æ˜¾ç¤ºï¼š"ğŸš§ **æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å•ä½**ã€‚è¯·å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…³é”®è¯ã€‚"
- **å…‘æ¢ç åˆ—è¡¨ (æ—  Active ä»£ç ):** å±…ä¸­æ˜¾ç¤ºï¼š"âœ… **å½“å‰æ‰€æœ‰å…‘æ¢ç å·²è¿‡æœŸæˆ–æš‚æ— æ–°ä»£ç **ã€‚è¯·æŒç»­å…³æ³¨ï¼"



### A.3. é”™è¯¯çŠ¶æ€ (Error State)



- **æ•°æ®è·å–å¤±è´¥:** åœ¨ç»„ä»¶åŒºåŸŸå†…æ˜¾ç¤ºé”™è¯¯æç¤ºå’Œé‡è¯•æŒ‰é’®ã€‚æ–‡æ¡ˆï¼š"âŒ **æ•°æ®åŒæ­¥å¤±è´¥**ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•ã€‚"
- **404 é¡µé¢:** å¿…é¡»æœ‰å®šåˆ¶çš„ 404 é¡µé¢ï¼Œæä¾›è¿”å›é¦–é¡µçš„æŒ‰é’®ã€‚

------



## é™„å½• Bï¼šæ ¸å¿ƒ GROQ æŸ¥è¯¢æ¸…å• (MVP å…³é”®)





### B.1. è§’è‰²è¯¦æƒ…é¡µ (Unit Profile) - **åå‘å…³è” (FR403)**



ä»£ç æ®µ

```
// æŸ¥æ‰¾å½“å‰ Unit çš„è¯¦æƒ…ï¼Œå¹¶åå‘æŸ¥æ‰¾å¼•ç”¨å®ƒçš„æ–‡ç« 
*[_type == "unit" && slug.current == $unitSlug][0] {
  ...,
  "relatedArticles": *[_type == "article" && references(^._id)] | order(_createdAt desc) {
    title, 
    slug, 
    _createdAt
  }
}
```



### B.2. æ–‡ç« è¯¦æƒ…é¡µ (Article Detail) - **æ­£å‘å…³è” (FR402)**



ä»£ç æ®µ

```
// æŸ¥æ‰¾æ–‡ç« è¯¦æƒ…ï¼Œå¹¶æ­£å‘è§£å¼•ç”¨å…³è”çš„è§’è‰²å¡ç‰‡ä¿¡æ¯
*[_type == "article" && slug.current == $articleSlug][0] {
  title,
  body, 
  "relatedUnits": related_units[]->{ 
    name, 
    slug, 
    rarity,
    "icon": image.asset->url
  }
}
```